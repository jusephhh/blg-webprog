<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Boss Lupit Gupit - Reservations</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="reservations.css">
    <link rel="icon" type="image/png" href="blgcircle.png">
</head>
<body>

    <header class="navbar">
        <a href="dashboard.html" class="logo">
            <img src="blgletterwhite.png" alt="logo"> BOSS LUPIT GUPIT
        </a>
        <nav>
            <ul>
                <li><a href="dashboard.html">Home</a></li>
                <li><a href="seats.html">View Live Seats</a></li>
                <li><a href="history.html">Service History</a></li>
            </ul>
        </nav>
        
        <div class="user-profile" id="userProfileContainer">
            <span>Hi, user123</span>
            <i class="fa-solid fa-circle-user fa-2xl" id="userIcon"></i>
            
            <div class="dropdown-menu" id="userDropdown">
                <a href="login.html" class="dropdown-item">
                    <i class="fa-solid fa-right-from-bracket"></i> Sign Out
                </a>
            </div>
        </div>
    </header>

    <main>
        <div class="intro">
            <a href="dashboard.html" style="text-decoration: none; color: inherit; display: inline-flex; align-items: center; gap: 8px; margin-bottom: 15px; font-weight: 600; font-size: large;">
                <i class="fa-solid fa-arrow-left"></i> Back
            </a>
            <h1>Your Reservations</h1>
            <p>You can only make reservations 6 hours before the reserved time. 
                To see more about reservation details. 
                <span onclick="openDetailsModal()" style="text-decoration: underline; font-weight: bold; cursor: pointer; color: var(--primary-brown);">Click Here</span>
            </p> 
        </div>

        <div id="reservationContainer">
            <div class="reservation-card">
                <div class="bell-icon">ðŸ””</div>
                <div class="content-wrapper">
                    <details>
                        <summary><h2 class="service-title">Signature Cut</h2></summary>
                        <ul class="sub-services"><li>Beard Shave</li></ul>
                    </details>
                    <div class="meta-info">1/24/2026 11:30 PM<br>Seat: 1</div>
                </div>
                <div class="status-area">
                    <div class="time-left">Time: 6 hrs left</div>
                    <div class="status-val">Status: <b class="status-accepted">Accepted</b></div>
                    <button class="btn-cancel" onclick="openCancelModal(this)">Cancel</button>
                </div>
            </div>

            <div class="reservation-card">
                <div class="bell-icon">ðŸ””</div>
                <div class="content-wrapper">
                    <details>
                        <summary><h2 class="service-title">The Executive</h2></summary>
                        <ul class="sub-services"><li>Charcoal Mask</li></ul>
                    </details>
                    <div class="meta-info">1/25/2026 10:00 AM<br>Seat: 3</div>
                </div>
                <div class="status-area">
                    <div class="time-left">Time: 16 hrs left</div>
                    <div class="status-val">Status: <b class="status-pending">Pending</b></div>
                    <button class="btn-cancel" onclick="openCancelModal(this)">Cancel</button>
                </div>
            </div>

            <div class="reservation-card">
                <div class="bell-icon">ðŸ””</div>
                <div class="content-wrapper">
                    <details>
                        <summary><h2 class="service-title">Modern Cut</h2></summary>
                    </details>
                    <div class="meta-info">1/25/2026 2:30 PM<br>Seat: 2</div>
                </div>
                <div class="status-area">
                    <div class="time-left">Time: 21 hrs left</div>
                    <div class="status-val">Status: <b class="status-on-hold">On Hold</b></div>
                    <button class="btn-cancel" onclick="openCancelModal(this)">Cancel</button>
                </div>
            </div>
        </div>

        <div class="footer-action">
            <button class="btn-reserve" id="openReserve">Make a Reservation</button>
        </div>

        <h3 class="section-header">Cancelled / Past Reservations</h3>
        <div id="historyContainer"></div>
    </main>

    <div class="modal-overlay" id="detailsOverlay">
        <div class="modal-content">
            <h2 style="color: var(--primary-brown); margin-bottom: 15px;">Seat Reservation Rules</h2>
            <div style="text-align: left; line-height: 1.6; color: #333;">
                <p><strong>1.</strong>  Walk-in clients cannot reserve seats.</p>
                <p><strong>2.</strong> Reservations must be made at least 6 hours before the reserved time.</p>
                <p><strong>3.</strong> Early arrival within the range of the reserved hours are accepted and are treated as walk-in sessions. 
                    Clients reservations who arrive early will only be released once the session is done.</p>
                <p><strong>4.</strong> Reservations are available only at 1 hour and 30-minute intervals per seat.</p>
                <p><strong>5.</strong> Reservations are governed by time-based capacity, not seat availability indicators.</p>
                <p><strong>6.</strong> A 5-minute grace period is observed after the reserved time.</p>
                <p><strong>7.</strong> Failure to arrive within the grace period results in cancellation and release to walk-ins.</p>
                <p><strong>8.</strong> Each service recipient may hold only one active reservation at a time. 
                    This means a single account can make multiple reservations per day only if  each is for a different service recipient.</p>
            </div>
            <button class="btn-action" style="margin-top: 20px;" onclick="closeDetailsModal()">Close</button>
        </div>
    </div>

    <div class="modal-overlay" id="reserveOverlay">
        <div class="modal-content">
            <h2 style="color: var(--primary-brown);">Make a Reservation</h2>
            <div class="form-group">
                <label>Service</label>
                <input type="text" id="serviceInput" placeholder="Choose a service" readonly>
            </div>
            <div class="form-group">
                <label>Date & Time</label>
                <input type="datetime-local" id="resDateTime">
            </div>
            <div class="form-group">
                <label>How many Customers</label>
                <select id="resSeat" style="background-color: #fff;">
                    <option value="" disabled selected>Choose how many</option>
                    <option value="1">I'm the only customer</option>
                    <option value="2">I have someone with me</option>
                    <option value="3">I have two person with me</option>
                </select>
            </div>
            <div class="form-group">
                <label>Choose your Barber</label>
                <select id="resSeat" style="background-color: #fff;">
                    <option value="" disabled selected>Select your Barber</option>
                    <option value="1">Mr. Richard</option>
                    <option value="2">Mr. Noel</option>
                    <option value="3">Mr. Rudy</option>
                </select>
            </div>
            <p style="font-size: 0.8rem; color: #666; margin-bottom: 15px; text-align: center;">Strictly arrive within five minutes of past reserved time to avoid automatic cancellation.</p>
            <button class="btn-action" id="reserveNowBtn">Reserve Now</button>
        </div>
    </div>

    <div class="modal-overlay" id="serviceMenuOverlay">
        <div class="modal-content">
            <div class="menu-header">Choose Your Service</div>
            <div class="menu-container">
                <div class="menu-column" data-group="haircut" data-type="single">
                    <div class="category-header-small">General</div>
                    <div class="selectable" onclick="handleMenuSelect(this)">
                        <h4>Signature Cut</h4><p>Price: â‚±300</p>
                    </div>
                    <div class="selectable" onclick="handleMenuSelect(this)">
                        <h4>The Executive</h4><p>Price: â‚±400</p>
                    </div>
                </div>
                <div class="menu-column" data-group="haircut" data-type="single">
                    <div class="category-header-small">Modern Cut</div>
                    <div class="selectable" onclick="handleMenuSelect(this)">
                        <h4>Modern Cut</h4><p>Price: â‚±450</p>
                    </div>
                </div>
                <div class="menu-column" data-group="haircut" data-type="single">
                    <div class="category-header-small">Bossing Services</div>
                    <div class="selectable" onclick="handleMenuSelect(this)">
                        <h4>The Fresh Boss</h4><p>Price: â‚±1,350</p>
                    </div>
                </div>
                <div class="menu-column" data-type="multi">
                    <div class="category-header-small">Add-ons</div>
                    <div class="selectable" onclick="handleMenuSelect(this)">
                        <h4>Beard Shave</h4><p>Price: â‚±350</p>
                    </div>
                    <div class="selectable" onclick="handleMenuSelect(this)">
                        <h4>Charcoal Mask</h4><p>Price: â‚±550</p>
                    </div>
                </div>
            </div>
            <div class="menu-footer">
                <button class="btn-reserve" onclick="confirmMenuSelection()">Confirm Selection</button>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="cancelModalOverlay">
        <div class="modal-content">
            <div class="cancel-header">
                <span style="font-size: 2rem; color: var(--primary-brown);">ðŸ””</span>
                <h2 id="modalHeaderTitle">Haircut</h2>
            </div>
            <div class="cancel-grid">
                <div class="detail-item">
                    <label>Reservation Details: <span id="modalDetailService" class="value-text"></span></label>
                    <div id="modalMetaInfo" class="sub-meta"></div>
                </div>
                <div class="status-right">
                    <div id="modalTimeLeft" style="font-weight: 600;">Time: -- hrs left</div>
                    <div style="margin-top: 15px; font-weight: 600;">Status: <span style="font-weight: 400;">Accepted</span></div>
                </div>
            </div>
            <textarea id="cancelReasonInput" placeholder="Reason for cancellation" rows="3"></textarea>
            <p style="color: #777; font-size: 0.85rem; margin-bottom: 20px;">Please ensure that you are available for the future reservations you make, thank you!</p>
            <div style="display: flex; gap: 10px;">
                <button class="cancel-btn-final" id="confirmCancelBtn">Confirm cancellation</button>
                <button class="cancel-btn-final" style="background: #eee; color: #333;" onclick="closeCancelModal()">Go Back</button>
            </div>
        </div>
    </div>

    <script>
        function openDetailsModal() {
            document.getElementById('detailsOverlay').style.display = 'flex';
        }
        function closeDetailsModal() {
            document.getElementById('detailsOverlay').style.display = 'none';
        }
        
        // Ensure clicking overlay closes it too
        document.getElementById('detailsOverlay').addEventListener('click', function(e) {
            if (e.target === this) closeDetailsModal();
        });
    </script>

    <script src="reservations.js"></script>
</body>
</html>